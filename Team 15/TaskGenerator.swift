//
//  TaskGenerator.swift
//  Team 15
//
//  Created by Ruba Alghamdi on 14/04/1447 AH.
//

import Foundation

struct TaskGenerator {
    static func randomTask(for category: String) -> String {
        // MARK: - Templates
        let templates: [String: [String]] = [
            "مطبخيات": [
                "🥗 سلطة ب # مكونات فقط",
                "🍓 حضّري سموذي من * و *",
                "🌶️ أضيفي بهار * و # حبات",
                "🍽️ حضّري وجبة باستخدام * و *",
                "🧊 رتّبي الفريزر خلال # دقائق",
                "🥪 اصنعي ساندويتش سرّي مع * و *",
                "🍪 خبّزي # قطع من *",
                "🍜 حضّري شوربة من * و *",
                "🍞 قطّعي * على شكل !",
                "🧂 جربي خلط * مع * لمذاق جديد",
                "🍋 زيّني الطبق بـ * و لون !",
                "🍡 قدّمي وجبة بلون ! فقط"
            ],
            "فنونيات": [
                "🖌️ ارسم باستخدام @",
                "🎨 ارسم باستخدام @ و ! ألوان فقط",
                "🙃 ارسم مشهد من الذاكرة مع ! كخلفية",
                "🎲 اجمع بين @ و @ لرسم شيء غريب",
                "🐒 ارسم حركة حيوان بشكل كوميكس و أضف !$",
                "🖼️ ارسم لوحة عنوانها *",
                "🧩 ارسم فكرة مجردة من ! فقط",
                "🖍️ استخدم @ لرسم شعورك الآن",
                "📐 صمّم شكل هندسي من @ و لون !",
                "✂️ اصنع عمل فني باستخدام أدوات من المطبخ",
                "🪶 ارسم نفسك كأنك في عالم كرتوني !"
            ],
            "مغامرات": [
                "🏃‍♀️ سباق جري قصير لمدة # دقائق",
                "🎬 مثل مشهد تمثيلي مضحك مع $",
                "🪢 شد الحبل # مرات",
                "🚶‍♀️ اكتشف مكانًا جديدًا و جرب $",
                "🔍 ابحث عن كنز باستخدام * و # أدلة",
                "🧗‍♂️ تسلّق درج المنزل # مرات متتالية",
                "🌳 اجلس في الخارج و اختر شيئًا ! لتتأمله",
                "🏹 تحدّ نفسك في لعبة دقة لمدة # دقائق",
                "💨 نفّذ مهمة $ في الهواء الطلق",
                "🎧 امشِ # دقائق مع موسيقى *"
            ],
            "عشوائيات": [
                "🤫 جرب لعبة من يسكت أطول و اجمع # نقاط",
                "🙃 تحدث بلهجة مضحكة و أضف $",
                "✏️ ارسم شيئًا غريبًا باستخدام @ و ! ألوان",
                "🙏 اكتب # أشياء ممتنة لها و شاركها مع أحد",
                "🕺 نفّذ حركة $ و اجعل الآخرين يقلدونك",
                "🎲 اسأل شخصًا سؤالًا ! و اضحك على الإجابة",
                "📸 التقط صورة لـ * بطريقة $",
                "🧠 اختر شيئًا حولك و اخترع له وظيفة جديدة",
                "📦 افتح صندوق عشوائي و استخدم ما فيه لعمل !",
                "👀 حاول العثور على شيء لونه ! داخل الغرفة"
            ],
            "ادبيات": [
                "📖 اقرأ صفحة من كتاب و اكتشف ! فكرة جديدة",
                "✍️ اكتبي خاطرة قصيرة و أضف # كلمات عشوائية",
                "💌 اكتب رسالة لشخص تحبه مع *",
                "🧠 اصنع قصة قصيرة تتكون من # جمل و $",
                "📜 اكتب جملة تبدأ بـ * و انتهي بـ !",
                "🖋️ كوّن قصيدة فيها # سطور فقط",
                "📚 اختر عنوانًا غريبًا و اكتب حوله 3 جمل",
                "🗞️ اختر كلمة من جريدة و كوّن حولها قصة",
                "💭 صف شعورك الآن باستخدام ! ألوان فقط",
                "🎤 اكتب حوار بين * و @"
            ]
        ]

        // MARK: - Randomized replacements
        let replacements: [Character: [String]] = [
            "#": ["2", "3", "4", "5", "6", "7", "8", "10", "12"],
            "*": ["تفاح", "موز", "شوكولاتة", "عسل", "كيوي", "تفاح", "مانجو", "قهوة", "فراولة", "عصير", "جبن", "بطاطس", "فلفل", "ليمون"],
            "@": ["قلم", "فرشاة", "ألوان مائية", "قلم فلوماستر", "عود خشبي", "ممحاة", "فرشاة أسنان", "قلم رصاص", "ورق مقوى"],
            "!": ["أحمر", "أزرق", "أصفر", "أخضر", "وردي", "برتقالي", "بنفسجي", "أسود", "أبيض"],
            "$": ["مضحكة", "غريبة", "عشوائية", "سحرية", "مجنونة", "غامضة", "كرتونية", "مليئة بالطاقة"]
        ]

        // MARK: - Choose and replace template
        guard let templatesForCategory = templates[category],
              var task = templatesForCategory.randomElement() else {
            return "🎯 مهمة غير محددة"
        }

        // Replace placeholders dynamically
        for (symbol, options) in replacements {
            while task.contains(symbol) {
                task = task.replacingOccurrences(of: String(symbol),
                                                 with: options.randomElement() ?? "")
            }
        }

        return task
    }
}
